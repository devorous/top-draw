<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Multiplayer Draw</title>
    <meta name="description" content="A collaborative multiplayer drawing application">
    <link id="favicon" rel="icon" href="/images/pepper.ico">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Color Picker Library -->
    <script src="https://unpkg.com/vanilla-picker@2"></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Newsreader:opsz@6..72&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" type="text/css" href="/css/style.css">
  </head>
  <body>
    <div id="main">
      <!-- Login Overlay -->
      <div id="overlay">
        <div id="login" class="overlayWindow" style="display: none;">
          <label>Enter Your Name</label>
          <input autocomplete="off" id="usernameInput" placeholder="Anonymous">
          <a class="btn join" id="joinBtn">Join Session</a>
        </div>
        <div id="connecting" class="overlayWindow">
          <label>Connecting to server...</label>
        </div>
      </div>

      <!-- Main Drawing Area -->
      <div id="boardContainer">
        <!-- Top Toolbar -->
        <div class="boardBtns">
          <a class="btn" id="clearBtn">Clear</a>
          <a class="btn" id="resetBtn">Reset View</a>

          <div class="zoomBtns">
            <a class="btn" id="minusBtn">-</a>
            <a class="btn" id="plusBtn">+</a>
          </div>
          <span class="zoomPercent">100%</span>

          <a class="btn" id="mirrorBtn">Mirror</a>
          <span class="mirrorOption">OFF</span>

          <div class="right">
            <a class="btn" id="saveBtn">Save Image</a>
            <a class="btn" id="chatResetBtn">Reset Chat</a>
            <a class="btn" id="chatBtn">Chat</a>
          </div>
        </div>

        <!-- Canvas Area -->
        <div id="boards">
          <div class="cursors">
            <svg id="cursorsSvg">
              <circle class="circle self"
                  stroke="grey"
                  stroke-width="1"
                  fill="none"
                  cx="0"
                  cy="0"
                  r="10">
              </circle>
              <rect class="square self"
                    stroke="grey"
                    stroke-width="1"
                    fill="none"
                    height="20"
                    width="20"
                    x="10"
                    y="10">
              </rect>
              <line class="mirrorLine"
                    x1="0"
                    y1="0"
                    x2="200"
                    y2="200"
                    stroke="grey"
                    stroke-width="1" />
              <div class="cursor self" style="display: none;">
                <text class="text self"><text class="textInput self"></text><text>|</text></text>
                <text class="name self"></text>
              </div>
            </svg>
          </div>

          <div id="userBoards"></div>
          <canvas id="topBoard" class="userBoard self"></canvas>
          <canvas id="board"></canvas>
        </div>

        <!-- Hidden: Timeline (Not Implemented) -->
        <div id="bottomBar">
          <div class="bottomBarBtns">
            <a class="btn" id="undoBtn">Undo</a>
            <a class="btn" id="showTimelineBtn">^</a>
          </div>
          <div id="timeline"></div>
        </div>
      </div>

      <!-- Side Panel -->
      <div id="sideMenu">
        <!-- Chat Window (Floating) -->
        <div id="chat">
          <div id="chatMessages">
            <ul id="messageList"></ul>
          </div>
          <div class="chatBottom">
            <input autocomplete="off" id="chatInput" placeholder="Type a message...">
            <a class="btn" id="sendMessageBtn">Send</a>
          </div>
        </div>

        <!-- Tool Buttons -->
        <div class="tools">
          <a class="tool btn selected" id="brushBtn" title="Brush (B)">
            <img src="/images/brush-icon.svg" alt="Brush">
          </a>
          <a class="tool btn" id="textBtn" title="Text (T)">
            <img src="/images/text-icon.svg" alt="Text">
          </a>
          <a class="tool btn" id="eraseBtn" title="Eraser (E)">
            <img src="/images/eraser-icon.svg" alt="Eraser">
          </a>
          <a class="tool btn" id="gimpBtn" title="GIMP Brush (G)">
            <img src="/images/pepper.png" alt="GIMP Brush">
          </a>
        </div>

        <!-- Tool Options Panel -->
        <div id="toolOptions">
          <!-- Connected Users -->
          <div id="userList">
            <div class="userEntry self">
              <a class="listTool self"></a>
              <a class="listColor self"></a>
              <span class="listUser self">You</span>
              <span class="listActive self"></span>
            </div>
          </div>

          <!-- Brush Options -->
          <div id="options">
            <div class="sliders">
              <div class="sliderContainer">
                <label>Brush Size</label>
                <input autocomplete="off" type="range" min="0.25" max="100" value="10" step="0.25" class="slider size">
              </div>

              <div class="sliderContainer">
                <label>Pressure Sensitivity</label>
                <input autocomplete="off" type="range" min="0" max="100" value="100" class="slider pressure">
              </div>

              <div class="sliderContainer" id="gimp-spacing" style="display: none;">
                <label>Brush Spacing</label>
                <input autocomplete="off" type="range" min="0" max="20" value="0" class="slider spacing">
              </div>

              <input autocomplete="off" type="file" id="gimp-file-input" accept=".gih,.gbr" style="display: none;">
              <img id="gimpImage" alt="Brush preview" style="display: none;">
            </div>
          </div>

          <!-- Color Picker -->
          <div id="pickerContainer">
            <div id="colorPicker"></div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
